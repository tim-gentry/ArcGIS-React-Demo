const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Legend-DIss-zPK.js","assets/index-DX0rcHuW.js","assets/index-B2yzeq1w.css","assets/jsxFactory-DmHi7Kb2.js","assets/uuid-fwrPAdZb.js","assets/featureReductionUtils-Caulfaw_.js","assets/EffectView-CZsZ4wVb.js","assets/ExportImageParameters-C0dqlx0B.js","assets/scaleUtils-ClqQrarK.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/sublayerUtils-BdOfNgEy.js","assets/pixelRangeUtils-DR2RxTkt.js","assets/rendererConversion-CGE-jMPN.js","assets/enums-BRXbslMp.js","assets/cimSymbolUtils-DzDRYI6s.js","assets/symbolUtils-d94wRD2Y.js","assets/utils-BbU12Hvz.js","assets/mat2df32-orApM5a3.js","assets/mat2d-CXMJJ9G6.js","assets/webStyleSymbolUtils-CT_ZIx-N.js","assets/devEnvironmentUtils-D6qIi8Ky.js","assets/utils-DbK1m8LJ.js","assets/Basemap-CjElSnyL.js","assets/loadAll-8MiqgLTH.js","assets/writeUtils-RiCb1SCd.js","assets/utils-CZ12wTZ2.js","assets/themeUtils-C3zvZbsE.js","assets/utils-Cj5nzmhN.js","assets/substitute-e0S7rtIE.js","assets/Heading-BI51LCyX.js","assets/globalCss-CZa70j6i.js","assets/accessibleHandler-CjDcv_he.js"])))=>i.map(i=>d[i]);
import{em as w,bY as d,fa as h,dI as m,_ as O,ac as s,ad as n,ag as I,V as b,fg as P,fh as M,fi as A,bh as E,i1 as y,b6 as k,el as V}from"./index-DX0rcHuW.js";import{p as D,a as F,s as H,u as C,c as T,o as x}from"./layerListUtils-BVwRmkZ0.js";import{B as $,n as p}from"./jsxFactory-DmHi7Kb2.js";import{e as f}from"./widget-Co0CQfZ6.js";let o=class extends w($){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([d(()=>this._canCreateLegend,()=>this._createLegend(),h),d(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),h)])}destroy(){this._legend=m(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e==null?void 0:e.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var v;const e=(v=this.listItem)==null?void 0:v.layer;if(!e||e.type==="subtype-sublayer")return null;const i=D(e)?e:null,r=e==null?void 0:e.parent,a=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,u="";return a&&r?{layer:r,title:u,sublayerIds:[a.mapLayerId]}:{layer:e,title:u}}get disabled(){var a;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return p("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:a}=this;return e&&!r&&a?e==="legend"&&i?p("div",{key:"legend-widget"},i.render()):typeof e=="string"?p("div",{innerHTML:e,key:e}):f(e)?p("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?p("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(m(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await O(()=>import("./Legend-DIss-zPK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:f(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};s([n()],o.prototype,"_legend",void 0),s([n()],o.prototype,"_canCreateLegend",null),s([n()],o.prototype,"_legendOptions",null),s([n()],o.prototype,"_legendLayerInfo",null),s([n()],o.prototype,"className",void 0),s([n()],o.prototype,"content",void 0),s([n()],o.prototype,"disabled",null),s([n()],o.prototype,"flowEnabled",void 0),s([n()],o.prototype,"icon",null),s([n()],o.prototype,"image",void 0),s([n()],o.prototype,"listItem",void 0),s([n()],o.prototype,"open",void 0),s([n()],o.prototype,"title",null),s([n()],o.prototype,"visible",void 0),o=s([I("esri.widgets.LayerList.ListItemPanel")],o);const S=o;var c;const W=b.ofType({key:"type",defaultKeyValue:"button",base:P,typeMap:{button:M,toggle:A,slider:F}}),L=b.ofType(W),_="layer",g="child-list-mode",N="hide";let l=c=class extends w(E){constructor(t){super(t),this.actionsSections=new L,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(b.ofType(c)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([d(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),h),d(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),h),d(()=>this.view,t=>this._updateChildrenView(t),h),d(()=>this.panel,t=>this._setListItemOnPanel(t),h)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new S(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=y(this,"layer.layer");return(!t||t&&y(this,"layer.layer.loaded"))&&y(this,"layer.title")||y(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!0}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return H(this.layer)}clone(){return new c({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(a=>!i.some(u=>u.layer===a));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(g),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(g),this.listModeDisabled||this.addHandles(t.toArray().map(e=>d(()=>e.listMode,()=>this._compileChildren(t))),g)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>C(i)!==N);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),_)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||T(i)?new c({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(k).reverse()}_watchLayerProperties(t){if(this.removeHandles(_),this.removeHandles(g),!t)return;if((!this.listModeDisabled&&C(t))==="hide-children")return void this.children.destroyAll();const e=x(t);e&&this.addHandles(d(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},h),_)}};s([n({type:L})],l.prototype,"actionsSections",void 0),s([n()],l.prototype,"actionsOpen",void 0),s([n()],l.prototype,"checkPublishStatusEnabled",void 0),s([n({type:b})],l.prototype,"children",void 0),s([n()],l.prototype,"childrenSortable",void 0),s([n({readOnly:!0})],l.prototype,"connectionStatus",null),s([n({readOnly:!0})],l.prototype,"error",null),s([n()],l.prototype,"hidden",void 0),s([n({readOnly:!0})],l.prototype,"incompatible",null),s([n()],l.prototype,"layer",void 0),s([n({readOnly:!0})],l.prototype,"layerView",null),s([n()],l.prototype,"listItemCreatedFunction",void 0),s([n({nonNullable:!0})],l.prototype,"listModeDisabled",void 0),s([n()],l.prototype,"open",void 0),s([n({type:S})],l.prototype,"panel",void 0),s([V("panel")],l.prototype,"castPanel",null),s([n()],l.prototype,"parent",void 0),s([n({value:!0})],l.prototype,"sortable",null),s([n()],l.prototype,"title",null),s([n({readOnly:!0})],l.prototype,"publishing",null),s([n({readOnly:!0})],l.prototype,"updating",null),s([n()],l.prototype,"view",void 0),s([n()],l.prototype,"visible",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentScale",null),s([n({readOnly:!0})],l.prototype,"visibleAtCurrentTimeExtent",null),s([n({readOnly:!0})],l.prototype,"visibilityMode",null),l=c=s([I("esri.widgets.LayerList.ListItem")],l);const j=l;export{j as I};
