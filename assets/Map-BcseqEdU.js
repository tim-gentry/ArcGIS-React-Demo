import{n as c,dJ as u,b5 as m,bh as h,dI as n,ac as s,ad as t,el as d,ag as b}from"./index-DX0rcHuW.js";import{F as g}from"./Basemap-CjElSnyL.js";import{b as i}from"./Ground-dhRLerDt.js";import{l as p}from"./CollectionFlattener-Be8YW6oV.js";import{e as v}from"./editableLayers-DuIVmwOk.js";import{y as f,m as L,b as T}from"./basemapUtils-rjdIOXhY.js";import{n as w,l as $,t as I}from"./TablesMixin-CcZZ6esO.js";const y={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function C(e){let a=null;if(typeof e=="string")if(e in y){const o=y[e];a=new i({resourceInfo:{data:{layers:[o]}}})}else c.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else a=u(i,e);return a}let r=class extends w($(m.EventedMixin(h))){constructor(e){super(e),this.allLayers=new p({getCollections:()=>{var a,o,l;return[(a=this.basemap)==null?void 0:a.baseLayers,(o=this.ground)==null?void 0:o.layers,this.layers,(l=this.basemap)==null?void 0:l.referenceLayers]},getChildrenFunction:a=>"layers"in a?a.layers:null}),this.allTables=I(this),this.basemap=null,this.editableLayers=new p({getCollections:()=>[this.allLayers],itemFilterFunction:v}),this.ground=new i,this._basemapCache=f()}destroy(){L(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=n(this.basemap),n(this.ground),this._set("ground",null)}castBasemap(e){return T(e,this._basemapCache)}castGround(e){return C(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(a=>a.id===e)}findTableById(e){return this.allTables.find(a=>a.id===e)}};s([t({readOnly:!0,dependsOn:[]})],r.prototype,"allLayers",void 0),s([t({readOnly:!0})],r.prototype,"allTables",void 0),s([t({type:g,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],r.prototype,"basemap",void 0),s([d("basemap")],r.prototype,"castBasemap",null),s([t({readOnly:!0})],r.prototype,"editableLayers",void 0),s([t({type:i,nonNullable:!0})],r.prototype,"ground",void 0),s([d("ground")],r.prototype,"castGround",null),s([t()],r.prototype,"undoRedo",void 0),r=s([b("esri.Map")],r);const M=r;export{M as L};
