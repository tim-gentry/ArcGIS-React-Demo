const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/calcite-button-B3dK3J4O.js","assets/button-D77aSY9T.js","assets/jsxFactory-DmHi7Kb2.js","assets/index-DX0rcHuW.js","assets/index-B2yzeq1w.css","assets/uuid-fwrPAdZb.js","assets/form-DT0Txu1X.js","assets/dom-Dv5tDaqe.js","assets/interactive-CM5F_5Ay.js","assets/label-CcvHzygA.js","assets/component-ByvC-PUv.js","assets/loadable-BpL5xwNx.js","assets/locale-jvDArz_C.js","assets/key-D5DPfjW0.js","assets/observers-CLdbMMrh.js","assets/t9n-Bv5oqD69.js","assets/icon-CWAu07D3.js","assets/loader-CQvnYTBN.js","assets/calcite-icon-W-AdNGRC.js","assets/calcite-scrim-ChpvlkQb.js","assets/scrim-CLRFMMcr.js"])))=>i.map(i=>d[i]);
import{ac as t,ad as i,el as R,ag as $,bh as T,bY as E,fa as L,eJ as M,G as B,d9 as P,bJ as I,da as O,_ as h}from"./index-DX0rcHuW.js";import{b as v,m as C,U as V,O as k}from"./basemapUtils-rjdIOXhY.js";import{e as j,B as A,r as D,n as l}from"./jsxFactory-DmHi7Kb2.js";import{e as f}from"./globalCss-CZa70j6i.js";import"./Basemap-CjElSnyL.js";import"./loadAll-8MiqgLTH.js";import"./writeUtils-RiCb1SCd.js";import"./uuid-fwrPAdZb.js";let n=class extends T{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=v("hybrid",this._basemapCache),this.view=null}initialize(){E(()=>this.nextBasemap,e=>{e&&!e.loaded&&e.load().catch(()=>{})},L)}destroy(){this.view=null,C(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return V(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,s;return v(((s=(e=this.view)==null?void 0:e.map)==null?void 0:s.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(e){return v(e,this._basemapCache)}get state(){const{view:e}=this;if(!(e!=null&&e.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:s}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&s!=null&&!e.spatialReference.equals(s)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:s,state:u,view:p}=this;if(!p||u==="disabled"||u==="incompatible-next-basemap")return;const m=this._viewSpatialReferenceLocked;if(!m){if(await M(()=>!this._nextBasemapSpatialReferenceTask.updating),s!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:d}=this._nextBasemapSpatialReferenceTask;if(d==null||B(p.spatialReference,d)||P()||I(p.spatialReference,d)||(this._loadingProjectionEngine=!0,await O(),this._loadingProjectionEngine=!1),s!==this.nextBasemap||e!==this.activeBasemap)return}p.map.basemap=s,m||this._nextBasemapSpatialReferenceTask.spatialReference==null||B(p.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(p.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return k(e)}};t([i()],n.prototype,"_loadingProjectionEngine",void 0),t([i({readOnly:!0})],n.prototype,"_nextBasemapSpatialReferenceTask",null),t([i({readOnly:!0})],n.prototype,"_viewSpatialReferenceLocked",null),t([i({readOnly:!0})],n.prototype,"activeBasemap",null),t([i()],n.prototype,"nextBasemap",void 0),t([R("nextBasemap")],n.prototype,"castNextBasemap",null),t([i({readOnly:!0})],n.prototype,"state",null),t([i()],n.prototype,"view",void 0),t([i()],n.prototype,"toggle",null),n=t([$("esri.widgets.BasemapToggle.BasemapToggleViewModel")],n);const S=n,c="esri-basemap-toggle",g="esri-basemap-thumbnail",r={base:c,secondaryBasemapImage:`${c}__image--secondary`,container:`${g} ${c}__container`,image:`${g}__image ${c}__image`,imageLoading:`${c}__image--loading`,overlay:`${g}__overlay ${c}__image-overlay`,title:`${g}__title ${c}__title`,overlayScrim:`${g}__overlay-scrim`};function w(a){const e=k(a);return e?{backgroundImage:"url("+e+")"}:{backgroundImage:""}}const x={title:!1};let o=class extends A{constructor(a,e){super(a,e),this.messages=null,this.viewModel=new S,this.visibleElements={...x},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return D({button:()=>h(()=>import("./calcite-button-B3dK3J4O.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])),icon:()=>h(()=>import("./calcite-icon-W-AdNGRC.js"),__vite__mapDeps([18,16,2,3,4,5,7,14])),scrim:()=>h(()=>import("./calcite-scrim-ChpvlkQb.js"),__vite__mapDeps([19,20,2,3,4,5,12,7,13,14,15,17]))})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(a){this._overrideIfSome("icon",a)}get label(){var a;return((a=this.messages)==null?void 0:a.widgetLabel)??""}set label(a){this._overrideIfSome("label",a)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(a){this.viewModel.nextBasemap=a}get view(){return this.viewModel.view}set view(a){this.viewModel.view=a}castVisibleElements(a){return{...x,...a}}render(){const a=this.viewModel,e=a.state==="disabled"?null:a.activeBasemap,s=a.state==="disabled"?null:a.nextBasemap,u=a.state==="loading",p=a.state==="incompatible-next-basemap",m=(s==null?void 0:s.title)??"",d=s&&s.loadStatus!=="loaded";let _;const b=this.visibleElements.title&&m,y=p;return(b||y)&&(_=l("div",{class:r.overlay,key:"overlay"},b?l("span",{class:r.title,title:m},m):null,y?l("calcite-scrim",{class:r.overlayScrim,title:this.messages.incompatibleSpatialReference},l("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),l("div",{class:this.classes(r.base,f.widget)},l("calcite-button",{appearance:"transparent","data-basemap-id":s?s.id:"",disabled:p,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},l("div",{class:this.classes(r.container,r.secondaryBasemapImage)},l("div",{class:r.image,styles:w(e)})),l("div",{class:r.container},l("div",{class:this.classes(r.image,d?r.imageLoading:null),styles:w(s)},d||u?l("calcite-scrim",null,l("span",{"aria-hidden":"true",class:f.loaderAnimation,role:"presentation"})):null),_)))}};t([i({readOnly:!0})],o.prototype,"activeBasemap",null),t([i()],o.prototype,"icon",null),t([i()],o.prototype,"label",null),t([i(),j("esri/widgets/BasemapToggle/t9n/BasemapToggle")],o.prototype,"messages",void 0),t([i()],o.prototype,"nextBasemap",null),t([i()],o.prototype,"view",null),t([i({type:S})],o.prototype,"viewModel",void 0),t([i()],o.prototype,"visibleElements",void 0),t([R("visibleElements")],o.prototype,"castVisibleElements",null),o=t([$("esri.widgets.BasemapToggle")],o);const H=o;export{H as default};
