import{s as n,aL as h,ac as d,ag as c}from"./index-DX0rcHuW.js";import{N as l}from"./DynamicLayerView3D-C5UNzmcy.js";import{m as u}from"./WMSLayerView-D4GTp8uc.js";import"./RenderGeometry-CQQOC_nW.js";import"./vec2f64-Diu2Kaa8.js";import"./vec3f32-Cw9Q6TO_.js";import"./DoubleArray-tnpOy9RK.js";import"./Texture-0jciB86n.js";import"./Matrix4PassUniform-CTNrzJ6Q.js";import"./interfaces-B8ge7Jg9.js";import"./BindType-BmZEZMMh.js";import"./VertexAttribute-BnAa5VW0.js";import"./Util-HYkJg9Vp.js";import"./enums-BlUEVwJR.js";import"./Texture-BF0Xf23l.js";import"./basicInterfaces-wONHx_SN.js";import"./vec2-C-4tM9Uv.js";import"./mat3-Ck4GO2qT.js";import"./mat3f64-BBpwCtoL.js";import"./mat4f64-Dk4dwAN8.js";import"./ShaderTechniqueConfiguration-D3UbJ2mX.js";import"./doublePrecisionUtils-B0owpBza.js";import"./Indices-BZu2O98k.js";import"./Material-BfvzXcva.js";import"./ViewingMode-Dodu7ZZk.js";import"./triangle-CGr49R4x.js";import"./sphere-COyqsaGw.js";import"./plane-BL9J6YX0.js";import"./quatf64-BrpT0VRp.js";import"./mathUtils-BsqbT0oM.js";import"./lineSegment-C2OVzbAD.js";import"./renderState-yUi34s5A.js";import"./requestImageUtils-Cd7mPI4y.js";import"./orientedBoundingBox-BTwqkknQ.js";import"./quat-DrJsq_-D.js";import"./spatialReferenceEllipsoidUtils-Bv0mQCFg.js";import"./computeTranslationToOriginAndRotation-B9BchKSd.js";import"./ElevationProvider-Xg9LKEp7.js";import"./boundedPlane-MAPkm7Yi.js";import"./verticalOffsetUtils-Bq_pVrum.js";import"./hydratedFeatures-DcIGyuBL.js";import"./projectVectorToVector-DjKO2tJh.js";import"./projectPointToVector-6lqiVL77.js";import"./frustum-Tc8kkw3_.js";import"./axisAngleDegrees-jEN9n05M.js";import"./weather-CSMUgeU9.js";import"./Scheduler-Bg_fxWwI.js";import"./signal-CpmfLcHB.js";import"./debugFlags-Cr0sx6r_.js";import"./Float4DrawUniform-X0Lc1Ix0.js";import"./NestedMap-DgiGbX8E.js";import"./Octree-lrGXb_0y.js";import"./InterleavedLayout-ZKuAjCiK.js";import"./BufferView-XrMc2vJu.js";import"./types-D0PSWh4d.js";import"./floatRGBA-DZ6CgOhi.js";import"./Intersector-CG5xfiNM.js";import"./glUtil-C6KhMg1m.js";import"./VertexElementDescriptor-BOD-G50G.js";import"./VertexArrayObject-9V6uZ6_q.js";import"./BufferObject-CWTeBz1x.js";import"./LayerView3D-CLOjZQPa.js";import"./heightModelInfoUtils-CTi_JiJC.js";import"./HeightModelInfo-DaJXTLDg.js";import"./arcgisLayerUrl-BpJodxxk.js";import"./projectExtentUtils-iwgeHhrT.js";import"./geometryServiceUtils-zF1xOQ4Y.js";import"./project-BQyPiext.js";import"./utils-nzDIu46v.js";import"./utils-D67OULxu.js";import"./ImageMaterial.glsl-B3buwcWq.js";import"./VertexColor.glsl-BX9otDj2.js";import"./DefaultLayouts-LbPHMYzg.js";import"./ColorMaterial.glsl-CcrBVOmk.js";import"./LayerView-C2s9lN61.js";import"./UpdatingHandles-CERUeL1P.js";import"./layerViewUtils-D2JqIDZ8.js";import"./RefreshableLayerView-C2j9J409.js";import"./ExportWMSImageParameters-XILMdRDN.js";import"./timeSupport-BW78MsMT.js";import"./timeUtils-CovJpMS2.js";import"./utils-CXgSw6Sd.js";import"./tagSymbols-BPcGfZon.js";let o=class extends u(l){constructor(){super(...arguments),this.type="wms-3d"}initialize(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new n("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this._updatingHandles.add(()=>{var t;return(t=this.exportImageParameters)==null?void 0:t.version},()=>{this._updatingHandles.addPromise(this.refreshDebounced())})}createFetchPopupFeaturesQuery(t){const p=this.findExtentInfoAt(t),i=p.extent,r=new h(i[0],i[1],i[2],i[3],this._spatialReference),m=p.imageSize,e=m.width,a=m.height,s=r.width/e;return{extent:r,width:e,height:a,x:Math.round((t.x-r.xmin)/s),y:Math.round((r.ymax-t.y)/s)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};o=d([c("esri.views.3d.layers.WMSLayerView3D")],o);const qt=o;export{qt as default};
