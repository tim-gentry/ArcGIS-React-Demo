const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/queryNamedTraceConfigurations-BnhxVItR.js","assets/index-DX0rcHuW.js","assets/index-B2yzeq1w.css","assets/utils-nzDIu46v.js","assets/FeatureLayer-Bb5mf85J.js","assets/FeatureLayerBase-uK0oK06Z.js","assets/inputs-Due4QVtL.js","assets/formUtils-Dni92j4V.js","assets/HeightModelInfo-DaJXTLDg.js","assets/arcgisLayerUrl-BpJodxxk.js","assets/LayerFloorInfo-D-bXPB8b.js","assets/Relationship-Clp_49iY.js","assets/serviceCapabilitiesUtils-CIgEASrL.js","assets/editsZScale-BDLbHb5e.js","assets/queryZScale-B1r3mH-Y.js","assets/APIKeyMixin-DSbft86T.js","assets/ArcGISService-CVVnFG2B.js","assets/EditBusLayer-Brt5ASt_.js","assets/uuid-fwrPAdZb.js","assets/FeatureType-Bb4KOLCq.js","assets/versionUtils-DlHqsQBg.js","assets/styleUtils-CxRaW7Jr.js","assets/TopFeaturesQuery-B-wHLSqs.js","assets/interfaces-CL2NbQte.js","assets/QueryNamedTraceConfigurationsParameters-B-wivpHr.js","assets/validateNetworkTopology-jru9cliU.js","assets/ValidateNetworkTopologyParameters-CZtKqFii.js","assets/queryAssociations-Uw8aNZ9r.js","assets/Association-DPDR3pVt.js","assets/QueryAssociationsParameters-BeJJhg7O.js","assets/synthesizeAssociationGeometries-D41ZVaUn.js","assets/SynthesizeAssociationGeometriesParameters-DCg-UdfE.js","assets/trace-CfeqG993.js","assets/TraceParameters-B_1Ni3D_.js"])))=>i.map(i=>d[i]);
import{ac as r,ad as i,ag as j,al as K,ai as be,b3 as Te,U as W,cA as Ie,f9 as Ee,kU as Se,D as pe,s as de,_ as E,a9 as Ce,a3 as Ne,ap as _e,n as Oe,I as Ae,f as ke,d as je,e0 as Re,aL as Ue,b2 as se,eL as $e,ae as Ve,hl as Le,bh as Pe,m as Fe,aK as Ge,aJ as Je,ff as xe}from"./index-DX0rcHuW.js";import De from"./FeatureLayer-Bb5mf85J.js";import{g as ye,a as le,l as Be,h as Me,t as me,i as he,c as we}from"./EditBusLayer-Brt5ASt_.js";import{d as ge}from"./arcgisLayerUrl-BpJodxxk.js";let F=class extends K{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};r([i({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],F.prototype,"moment",void 0),r([i({type:Boolean,json:{write:!0}})],F.prototype,"fullUpdate",void 0),r([i({type:Boolean,json:{write:!0}})],F.prototype,"validateErrorsCreated",void 0),r([i({type:Number,json:{write:!0}})],F.prototype,"dirtyAreaCount",void 0),r([i({type:Boolean,json:{write:!0}})],F.prototype,"exceededTransferLimit",void 0),r([i({type:[Object],json:{write:!0}})],F.prototype,"serviceEdits",void 0),r([i({type:[Object],json:{write:!0}})],F.prototype,"discoveredSubnetworks",void 0),F=r([j("esri.rest.networks.support.ValidateNetworkTopologyResult")],F);const qe=F,ze=be()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let q=class extends qe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const o={...t,query:{f:"json"}},{data:s}=await W(this.statusUrl,o);return this.read(s),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:o=1e3,statusCallback:s}=t;return new Promise((n,a)=>{this._clearTimer();const l=setInterval(()=>{this._timer||a(Ie()),this.checkJobStatus().then(d=>{const{status:c}=d;switch(this.status=c,c){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":s&&s(this)}},d=>{this._clearTimer(),a(d)})},o);this._timer=l})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};r([i()],q.prototype,"editsResolver",void 0),r([i({type:String,json:{write:!0}})],q.prototype,"statusUrl",void 0),r([Te(ze)],q.prototype,"status",void 0),r([i({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],q.prototype,"submissionTime",void 0),r([i({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],q.prototype,"lastUpdatedTime",void 0),q=r([j("esri.networks.support.TopologyValidationJobInfo")],q);const He=q;function gt(e,t){const o=[],s=new Map;for(const a of t){const l=e.getLayerIdBySourceId(a.networkSourceId);if(l==null)continue;let d=s.get(l);d===void 0&&(d=[]),d.push(a.objectId),s.set(l,d)}const n=e.featureServiceUrl;return s.forEach((a,l)=>o.push({layerUrl:`${n}/${l}`,objectIds:a})),o}async function vt(e,t){const o=e.layers,s=e.layerInfos,n=e.returnGeometry||!1,a=e.outSpatialReference;return await Promise.all(o.map(async l=>{await l.load()})),(await Promise.all(o.map(async l=>{var w;const d=s.find(g=>{var y;return g.layerUrl===((y=l.parsedUrl)==null?void 0:y.path)});if(!((w=d==null?void 0:d.objectIds)!=null&&w.length))return{layer:l,featureSet:void 0};const c=l.createQuery();c.returnGeometry=n,c.outFields=d.outFields||["*"],c.outSpatialReference=a,c.gdbVersion=l.gdbVersion,c.objectIds=d.objectIds;const h=Ee.fromJSON(await Se(l,c));return{layer:l,featureSet:h}}))).filter(l=>l.featureSet!==void 0)}async function ve(e,t){if(e==="Utility Network Layer"){const{default:o}=await E(()=>Promise.resolve().then(()=>ut),void 0);return new o({layerUrl:t})}return null}async function Ke(e){var l;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof pe||(t={...t,portalItem:new pe(t.portalItem)});const o=t.portalItem;if(await o.load(),o.type!=="Feature Service")throw new de("portal:unknown-item-type","Unknown item type '${type}'",{type:o.type});const s=o.url,n=await W(s,{responseType:"json",query:{f:"json"}}),a="Network Layer";if((l=n.data.type)!=null&&l.includes(a))return ve(n.data.type,s);if(n.data.layers){const d=n.data.layers.find(c=>c.type.includes(a));if(d){const c=`${s}/${d.id}`;return ve(d.type,c)}}return null}let v=class extends Ce(Ne){static fromPortalItem(e){return Ke(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._applyEditsHandler=t=>{const{serviceUrl:o,gdbVersion:s,result:n}=t,a=o===this.featureServiceUrl,l=ye(o,s,this.gdbVersion);a&&l&&n.then(d=>{le(o,s)&&(this.historicMoment=d.historicMoment)})},this._updateMomentHandler=t=>{const{serviceUrl:o,gdbVersion:s,moment:n}=t,a=o===this.featureServiceUrl,l=ye(o,s,this.gdbVersion);a&&l&&(this.historicMoment=n)},this.when().then(()=>{this.addHandles([Be(this._applyEditsHandler),Me(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{_e(e)||Oe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return Ae(this.layerUrl)}get featureServiceUrl(){return ge(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return ge(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const o of t){for(const s of o.edgeSources??[])if(s.sourceId===e)return s.layerId;for(const s of o.junctionSources??[])if(s.sourceId===e)return s.layerId}return null}return null}async queryNamedTraceConfigurations(e,t){var l;const[{queryNamedTraceConfigurations:o},{default:s}]=await Promise.all([E(()=>import("./queryNamedTraceConfigurations-BnhxVItR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./QueryNamedTraceConfigurationsParameters-B-wivpHr.js"),__vite__mapDeps([24,1,2]))]),n=this.networkServiceUrl,a=s.from(e);return(l=await o(n,a,{...t}))==null?void 0:l.namedTraceConfigurations}async validateTopology(e,t){var h,w,g;if(!e.validateArea)throw new de("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:o},{default:s}]=await Promise.all([E(()=>import("./validateNetworkTopology-jru9cliU.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./ValidateNetworkTopologyParameters-CZtKqFii.js"),__vite__mapDeps([26,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))]),n=s.from(e);le(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=me,await he(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const a=this.networkServiceUrl,l=this.featureServiceUrl,d=we(l,null,this.gdbVersion,!0),c=await o(a,n,{...t});if(c!=null&&c.serviceEdits){const y=[];for(const f of c.serviceEdits){const{editedFeatures:p}=f,u=p!=null&&p.spatialReference?new ke(p.spatialReference):null;y.push({layerId:f.layerId,editedFeatures:{adds:((h=p==null?void 0:p.adds)==null?void 0:h.map(b=>re(b,u)))||[],updates:((w=p==null?void 0:p.updates)==null?void 0:w.map(b=>({original:re(b[0],u),current:re(b[1],u)})))||[],deletes:((g=p==null?void 0:p.deletes)==null?void 0:g.map(b=>re(b,u)))||[],spatialReference:u}})}d.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:y,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,t){let o=null;if(!e.validateArea)throw new de("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");o=(await W(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:s},{default:n}]=await Promise.all([E(()=>import("./validateNetworkTopology-jru9cliU.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./ValidateNetworkTopologyParameters-CZtKqFii.js"),__vite__mapDeps([26,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))]),a=n.from(e);le(this.featureServiceUrl,this.gdbVersion||null)?(a.sessionID=me,await he(this.featureServiceUrl,this.gdbVersion,!0)):a.sessionID=null,a.gdbVersion=this.gdbVersion||o;const l=this.networkServiceUrl,d=this.featureServiceUrl?we(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await s(l,a,{...t});return new He({statusUrl:c,editsResolver:d})}async _fetchLayerMetaData(e,t){const o=await W(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=o.data,this.read(o.data,{origin:"service"})}async _fetchDataElement(e,t,o){if(this.dataElement)return;const s=await W(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...o}).then(n=>{var a;return(a=n.data.layerDataElements)==null?void 0:a[0]});s&&this.read(s,{origin:"service"})}};function re(e,t){return new je({attributes:e.attributes,geometry:Re({...e.geometry,spatialReference:t})})}r([i({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],v.prototype,"id",void 0),r([i({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],v.prototype,"title",void 0),r([i({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],v.prototype,"layerUrl",void 0),r([i({type:Object,json:{origins:{service:{read:!0}},read:!1}})],v.prototype,"dataElement",void 0),r([i({type:Ue,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],v.prototype,"fullExtent",void 0),r([i({type:ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],v.prototype,"spatialReference",void 0),r([i({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],v.prototype,"type",void 0),r([i({readOnly:!0})],v.prototype,"datasetName",null),r([i({readOnly:!0})],v.prototype,"owner",null),r([i({readOnly:!0})],v.prototype,"schemaGeneration",null),r([i({readOnly:!0})],v.prototype,"parsedUrl",null),r([i({readOnly:!0})],v.prototype,"featureServiceUrl",null),r([i({readOnly:!0})],v.prototype,"networkServiceUrl",null),r([i({readOnly:!0})],v.prototype,"layerId",null),r([i()],v.prototype,"sourceJSON",void 0),r([i({readOnly:!0})],v.prototype,"networkSystemLayers",null),r([i()],v.prototype,"gdbVersion",void 0),r([i({type:Date})],v.prototype,"historicMoment",void 0),v=r([j("esri.networks.Network")],v);const Ye=v;var D;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTAttachment=2]="RTAttachment",e[e.RTContainment=3]="RTContainment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(D||(D={}));const oe=new se({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),ft=new se({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),We={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6},bt=new se({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let z=class extends $e(Ne){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=W}initialize(){}async load(t){const o=this.layer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(o),this}getFeatureSQL(t,o){var h,w;const s=t.layerId.toString(),n=(h=t.fieldsIndex)==null?void 0:h.normalizeFieldName("assetGroup"),a=(w=t.fieldsIndex)==null?void 0:w.normalizeFieldName("assetType"),l=n?o.attributes[n]:null,d=a?o.attributes[a]:null,c=this.rulesHash[s];if(c){const g=c.assetGroupHash[l];if(g)return g.assetTypeHash[d]||null}return null}async _initializeRulesTable(){var n,a,l,d,c,h,w,g,y,f,p;const t={};let o;(function(u){u[u.from=0]="from",u[u.to=1]="to",u[u.via=2]="via"})(o||(o={}));const s=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const u of this.rules){if(u.ruleType===D.RTAttachment){this.rulesCategorized.attachment.push(u);continue}if(u.ruleType===D.RTContainment){this.rulesCategorized.containment.push(u);continue}if(u.ruleType===D.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(u);continue}this.rulesCategorized.connectivity.push(u);let b=[[o.from,o.to],[o.to,o.from]];u.ruleType===D.RTEdgeJunctionEdgeConnectivity&&(b=[[o.from,o.via],[o.via,o.from],[o.to,o.via],[o.via,o.to]]);for(const L of b){const P=L.shift(),Q=L.shift();let B=!1;switch(u.ruleType){case D.RTEdgeJunctionEdgeConnectivity:B=P===o.from||P===o.to;break;case D.RTJunctionEdgeConnectivity:B=P===o.to}const k=s[P],T=((n=u[k.networkSourceId])==null?void 0:n.layerId.toString())??"",I=(l=(a=u[k.assetGroupId])==null?void 0:a.assetGroupCode)==null?void 0:l.toString(),R=u[k.assetTypeId],O=(d=R==null?void 0:R.assetTypeCode)==null?void 0:d.toString(),U=s[Q],C=((c=u[U.networkSourceId])==null?void 0:c.layerId.toString())??"",G=(w=(h=u[U.assetGroupId])==null?void 0:h.assetGroupCode)==null?void 0:w.toString(),S=u[U.assetTypeId],M=(g=S==null?void 0:S.assetTypeCode)==null?void 0:g.toString(),ne=t[T]??{assetGroupHash:{}};if(!(I&&O&&G&&M))continue;const ae=ne.assetGroupHash[I]??{assetTypeHash:{}},N=ae.assetTypeHash[O]??{};if(N[C]=N[C]??{},B){N[T]=N[T]??{};const ce=`(assetgroup = ${I} AND assettype = ${O})`;N[T].anyVertex=N[T].anyVertex?`${N[T].anyVertex}`:`${ce}`,(S==null?void 0:S.connectivityPolicy)==="esriNECPEndVertex"&&(N[T].endVertex=(y=N[T])!=null&&y.endVertex?`${N[T].endVertex}`:`${ce}`)}const te=`(assetgroup = ${G} AND assettype = ${M})`;N[C].anyVertex=(f=N[C])!=null&&f.anyVertex?`${N[C].anyVertex} OR ${te}`:`${te}`,(S==null?void 0:S.connectivityPolicy)==="esriNECPEndVertex"&&(N[C].endVertex=(p=N[C])!=null&&p.endVertex?`${N[C].endVertex} OR ${te}`:`${te}`),ae.assetTypeHash[O]=N,ne.assetGroupHash[I]=ae,t[T]=ne}}this.rulesHash=t}};r([i({constructOnly:!0})],z.prototype,"layer",void 0),r([i({constructOnly:!0})],z.prototype,"rules",void 0),r([i()],z.prototype,"rulesHash",void 0),r([i()],z.prototype,"rulesCategorized",void 0),r([i({constructOnly:!0})],z.prototype,"request",void 0),z=r([j("esri.networks.RulesTable")],z);const Qe=z;let A=class extends K{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};r([i({type:[Object],json:{write:!0}})],A.prototype,"conditionBarriers",void 0),r([i({type:[Object],json:{write:!0}})],A.prototype,"outputConditions",void 0),r([i({type:[Object],json:{write:!0}})],A.prototype,"functions",void 0),r([i({type:[Object],json:{write:!0}})],A.prototype,"functionBarriers",void 0),r([i({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],A.prototype,"traversabilityScope",void 0),r([i({type:String,json:{write:!0}})],A.prototype,"shortestPathNetworkAttributeName",void 0),r([i({type:Boolean,json:{write:!0}})],A.prototype,"includeBarriers",void 0),r([i({type:Boolean,json:{write:!0}})],A.prototype,"validateConsistency",void 0),r([i({type:Boolean,json:{write:!0}})],A.prototype,"ignoreBarriersAtStartingPoints",void 0),A=r([j("esri.networks.support.TraceConfiguration")],A);const ue=A;let m=class extends ue{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};r([i({type:[Object],json:{write:!0}})],m.prototype,"filterBarriers",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"arcadeExpressionBarrier",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"domainNetworkName",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"filterBitsetNetworkAttributeName",void 0),r([i({type:[Object],json:{write:!0}})],m.prototype,"filterFunctionBarriers",void 0),r([i({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],m.prototype,"filterScope",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"includeContainers",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"includeContent",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"includeIsolated",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"includeStructures",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"allowIndeterminateFlow",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"includeUpToFirstSpatialContainer",void 0),r([i({type:Object,json:{write:!0}})],m.prototype,"nearestNeighbor",void 0),r([i({type:[Object],json:{write:!0}})],m.prototype,"outputFilterCategories",void 0),r([i({type:[Object],json:{write:!0}})],m.prototype,"outputFilters",void 0),r([i({type:[Object],json:{write:!0}})],m.prototype,"propagators",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"subnetworkName",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"targetTierName",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"diagramTemplateName",void 0),r([i({type:String,json:{write:!0}})],m.prototype,"tierName",void 0),r([i({type:Boolean,json:{write:!0}})],m.prototype,"validateLocatability",void 0),m=r([j("esri.networks.support.UNTraceConfiguration")],m);const Ze=m;let _=class extends Le{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,o){return t.tierName!==void 0?Ze.fromJSON(t):ue.fromJSON(t)}};r([i({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],_.prototype,"globalId",void 0),r([i({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],_.prototype,"title",void 0),r([i({type:ue,json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"traceConfiguration",void 0),r([Ve("service","traceConfiguration")],_.prototype,"readTraceConfiguration",null),r([i({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"creationDate",void 0),r([i({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"creator",void 0),r([i({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"description",void 0),r([i({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],_.prototype,"minStartingPoints",void 0),r([i({json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"resultTypes",void 0),r([i({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],_.prototype,"tags",void 0),r([i({type:oe.apiValues,json:{type:oe.jsonValues,origins:{service:{read:oe.read,write:oe.write}},read:!1}})],_.prototype,"traceType",void 0),_=r([j("esri.networks.support.NamedTraceConfiguration")],_);const Xe=_;let $=class extends Pe{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTableId=null,this.associationsTableUrl=null}};r([i({constructOnly:!0})],$.prototype,"rulesTableId",void 0),r([i({constructOnly:!0})],$.prototype,"rulesTableUrl",void 0),r([i({constructOnly:!0})],$.prototype,"subnetworksTableId",void 0),r([i({constructOnly:!0})],$.prototype,"subnetworksTableUrl",void 0),r([i({constructOnly:!0})],$.prototype,"dirtyAreasLayerId",void 0),r([i({constructOnly:!0})],$.prototype,"dirtyAreasLayerUrl",void 0),r([i({constructOnly:!0})],$.prototype,"associationsTableId",void 0),r([i({constructOnly:!0})],$.prototype,"associationsTableUrl",void 0),$=r([j("esri.networks.support.NetworkSystemLayers")],$);const et=$;let Z=class extends K{constructor(t){super(t),this.id=null,this.name=null}};r([i({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Z.prototype,"id",void 0),r([i({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Z.prototype,"name",void 0),r([i({type:Boolean,json:{write:!0}})],Z.prototype,"isUpstreamTerminal",void 0),Z=r([j("esri.networks.support.Terminal")],Z);const tt=Z,ie=new se({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let H=class extends K{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};r([i({type:String,json:{write:!0}})],H.prototype,"defaultConfiguration",void 0),r([i({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],H.prototype,"id",void 0),r([i({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],H.prototype,"name",void 0),r([i({type:[tt],json:{write:!0}})],H.prototype,"terminals",void 0),r([i({type:ie.apiValues,json:{type:ie.jsonValues,read:ie.read,write:ie.write}})],H.prototype,"traversabilityModel",void 0),H=r([j("esri.networks.support.TerminalConfiguration")],H);const fe=H;let X=class extends K{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};r([i({type:Fe,json:{write:!0},readOnly:!0})],X.prototype,"line",void 0),r([i({type:Ge,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],X.prototype,"multipoint",void 0),r([i({type:Je,json:{write:!0},readOnly:!0})],X.prototype,"polygon",void 0),X=r([j("esri.rest.networks.support.AggregatedGeometry")],X);const rt=X;let ee=class extends K{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};r([i({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],ee.prototype,"functionType",void 0),r([i({type:String,json:{write:!0},readOnly:!0})],ee.prototype,"networkAttributeName",void 0),r([i({type:Number,json:{write:!0},readOnly:!0})],ee.prototype,"result",void 0),ee=r([j("esri.rest.networks.support.FunctionResult")],ee);const ot=ee;let V=class extends K{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};r([i({type:Number,json:{write:!0}})],V.prototype,"assetGroupCode",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"assetTypeCode",void 0),r([i({type:String,json:{write:!0}})],V.prototype,"globalId",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"networkSourceId",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"objectId",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"positionFrom",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"positionTo",void 0),r([i({type:Number,json:{write:!0}})],V.prototype,"terminalId",void 0),V=r([j("esri.rest.networks.support.NetworkElement")],V);const it=V;let J=class extends K{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};r([i({type:rt,json:{write:!0},readOnly:!0})],J.prototype,"aggregatedGeometry",void 0),r([i({type:[it],json:{write:!0},readOnly:!0})],J.prototype,"elements",void 0),r([i({type:[ot],json:{write:!0},readOnly:!0})],J.prototype,"globalFunctionResults",void 0),r([i({type:Boolean,json:{write:!0},readOnly:!0})],J.prototype,"kFeaturesForKNNFound",void 0),r([i({type:Boolean,json:{write:!0},readOnly:!0})],J.prototype,"startingPointsIgnored",void 0),r([i({type:[String],json:{write:!0},readOnly:!0})],J.prototype,"warnings",void 0),J=r([j("esri.rest.networks.support.TraceResult")],J);const st=J,nt=be()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Y=class extends st{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const t={...e,query:{f:"json"}},{data:o}=await W(this.statusUrl,t),s=o.traceResults?{...o.traceResults,...o}:o;return this.read(s),this}async waitForJobCompletion(e={}){const{interval:t=1e3,statusCallback:o}=e;return new Promise((s,n)=>{this._clearTimer();const a=setInterval(()=>{this._timer||n(Ie()),this.checkJobStatus().then(l=>{const{status:d}=l;switch(this.status=d,d){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":o&&o(this)}},l=>{this._clearTimer(),n(l)})},t);this._timer=a})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};r([i({type:String,json:{write:!0}})],Y.prototype,"statusUrl",void 0),r([Te(nt)],Y.prototype,"status",void 0),r([i({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Y.prototype,"submissionTime",void 0),r([i({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Y.prototype,"lastUpdatedTime",void 0),Y=r([j("esri.networks.support.TraceJobInfo")],Y);const at=Y;let x=class extends Ye{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,t,o,s,n,a,l,d;return new et({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId}`:null,subnetworksTableId:(o=this.sourceJSON)==null?void 0:o.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(s=this.sourceJSON)==null?void 0:s.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(n=this.sourceJSON)==null?void 0:n.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(a=this.sourceJSON)==null?void 0:a.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(d=this.sourceJSON)==null?void 0:d.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(t=>fe.fromJSON(t)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(t=>t.domainNetworkName))||[]}get _utilityLayerList(){var t,o;const e=new Set;return(o=(t=this.dataElement)==null?void 0:t.domainNetworks)==null||o.map(s=>{s.edgeSources.map(n=>{e.add(n.layerId)}),s.junctionSources.map(n=>{e.add(n.layerId)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var c,h,w,g;let t=null,o=null;const s=e.layer;let n=null;if((s==null?void 0:s.type)==="feature"){if(n=s.layerId,n===null)return null}else if((s==null?void 0:s.type)!=="subtype-sublayer"||(n=((c=s==null?void 0:s.parent)==null?void 0:c.layerId)??null,n===null))return null;const a=e.attributes;if(a==null)return null;for(const y of Object.keys(a))y.toUpperCase()==="ASSETGROUP"&&(t=e.getAttribute(y)),y.toUpperCase()==="ASSETTYPE"&&(o=e.getAttribute(y));if(!this.dataElement)return null;let l=null;const d=this.dataElement.domainNetworks;for(const y of d){const f=(h=y.junctionSources)==null?void 0:h.find(p=>p.layerId===n);if(f){const p=(w=f.assetGroups)==null?void 0:w.find(u=>u.assetGroupCode===t);if(p){const u=(g=p.assetTypes)==null?void 0:g.find(b=>b.assetTypeCode===o);if(u){l=u.terminalConfigurationId;break}}}}if(l!=null){const y=this.dataElement.terminalConfigurations,f=y==null?void 0:y.find(p=>p.terminalConfigurationId===l);return f?fe.fromJSON(f):null}return null}getTierNames(e){var o;const t=(o=this.dataElement)==null?void 0:o.domainNetworks.find(s=>s.domainNetworkName===e);return(t==null?void 0:t.tiers.map(s=>s.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}isUtilityLayer(e){var t;return this._utilityLayerList.has(e.layerId)&&(((t=e.url)==null?void 0:t.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e){const[{queryAssociations:t},{default:o}]=await Promise.all([E(()=>import("./queryAssociations-Uw8aNZ9r.js"),__vite__mapDeps([27,1,2,3,28,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./QueryAssociationsParameters-BeJJhg7O.js"),__vite__mapDeps([29,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))]),s=o.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await t(this.networkServiceUrl,s)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:t},{default:o}]=await Promise.all([E(()=>import("./synthesizeAssociationGeometries-D41ZVaUn.js"),__vite__mapDeps([30,1,2,3,28,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./SynthesizeAssociationGeometriesParameters-DCg-UdfE.js"),__vite__mapDeps([31,1,2]))]),s=o.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,t(this.networkServiceUrl,s)}async trace(e){const[{trace:t},{default:o}]=await Promise.all([E(()=>import("./trace-CfeqG993.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./TraceParameters-B_1Ni3D_.js").then(n=>n.T),__vite__mapDeps([33,1,2]))]),s=o.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,t(this.networkServiceUrl,s)}async submitTraceJob(e){const[{submitTraceJob:t},{default:o}]=await Promise.all([E(()=>import("./trace-CfeqG993.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])),E(()=>import("./TraceParameters-B_1Ni3D_.js").then(a=>a.T),__vite__mapDeps([33,1,2]))]),s=o.from(e);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await t(this.networkServiceUrl,s);return new at({statusUrl:n})}async canAddAssociation(e){const t=await this.getRulesTable();if(!t)return!1;await t.load();const o=(n,a)=>n?n.terminalId===1?!(a!=null&&a.terminalId)||(a==null?void 0:a.terminalId)===n.terminalId:n.terminalId===(a==null?void 0:a.terminalId):!(a!=null&&a.terminalId),s=(n,a)=>{var l,d,c,h,w,g,y,f,p,u,b,L;return((l=n.fromNetworkSource)==null?void 0:l.sourceId)===((d=a.fromNetworkElement)==null?void 0:d.networkSourceId)&&((c=n.toNetworkSource)==null?void 0:c.sourceId)===((h=a.toNetworkElement)==null?void 0:h.networkSourceId)&&((w=n.fromAssetGroup)==null?void 0:w.assetGroupCode)===((g=a.fromNetworkElement)==null?void 0:g.assetGroupCode)&&((y=n.fromAssetType)==null?void 0:y.assetTypeCode)===((f=a.fromNetworkElement)==null?void 0:f.assetTypeCode)&&((p=n.toAssetGroup)==null?void 0:p.assetGroupCode)===((u=a.toNetworkElement)==null?void 0:u.assetGroupCode)&&((b=n.toAssetType)==null?void 0:b.assetTypeCode)===((L=a.toNetworkElement)==null?void 0:L.assetTypeCode)&&o(n.fromTerminal,a.fromNetworkElement)&&o(n.toTerminal,a.toNetworkElement)};return e.associationType==="containment"?t.rulesCategorized.containment.some(n=>s(n,e)):e.associationType==="attachment"?t.rulesCategorized.attachment.some(n=>s(n,e)):t.rulesCategorized.connectivity.some(n=>{var a,l,d,c,h,w,g,y,f,p,u,b,L,P,Q,B,k,T,I,R,O,U,C,G;return n.viaNetworkSource?((a=n.fromNetworkSource)==null?void 0:a.sourceId)===((l=e.fromNetworkElement)==null?void 0:l.networkSourceId)&&((d=n.viaNetworkSource)==null?void 0:d.sourceId)===((c=e.toNetworkElement)==null?void 0:c.networkSourceId)&&((h=n.fromAssetGroup)==null?void 0:h.assetGroupCode)===((w=e.fromNetworkElement)==null?void 0:w.assetGroupCode)&&((g=n.fromAssetType)==null?void 0:g.assetTypeCode)===((y=e.fromNetworkElement)==null?void 0:y.assetTypeCode)&&((f=n.viaAssetGroup)==null?void 0:f.assetGroupCode)===((p=e.toNetworkElement)==null?void 0:p.assetGroupCode)&&((u=n.viaAssetType)==null?void 0:u.assetTypeCode)===((b=e.toNetworkElement)==null?void 0:b.assetTypeCode)&&o(n.fromTerminal,e.fromNetworkElement)&&o(n.viaTerminal,e.toNetworkElement)||((L=n.viaNetworkSource)==null?void 0:L.sourceId)===((P=e.fromNetworkElement)==null?void 0:P.networkSourceId)&&((Q=n.toNetworkSource)==null?void 0:Q.sourceId)===((B=e.toNetworkElement)==null?void 0:B.networkSourceId)&&((k=n.viaAssetGroup)==null?void 0:k.assetGroupCode)===((T=e.fromNetworkElement)==null?void 0:T.assetGroupCode)&&((I=n.viaAssetType)==null?void 0:I.assetTypeCode)===((R=e.fromNetworkElement)==null?void 0:R.assetTypeCode)&&((O=n.toAssetGroup)==null?void 0:O.assetGroupCode)===((U=e.toNetworkElement)==null?void 0:U.assetGroupCode)&&((C=n.toAssetType)==null?void 0:C.assetTypeCode)===((G=e.toNetworkElement)==null?void 0:G.assetTypeCode)&&o(n.viaTerminal,e.fromNetworkElement)&&o(n.toTerminal,e.toNetworkElement):s(n,e)})}generateAddAssociations(e){return{addFeatures:e.map(t=>{var o,s,n,a,l,d;return new je({attributes:{fromnetworksourceid:(o=t.fromNetworkElement)==null?void 0:o.networkSourceId,fromglobalid:(s=t.fromNetworkElement)==null?void 0:s.globalId,fromterminalid:(n=t.fromNetworkElement)==null?void 0:n.terminalId,tonetworksourceid:(a=t.toNetworkElement)==null?void 0:a.networkSourceId,toglobalid:(l=t.toNetworkElement)==null?void 0:l.globalId,toterminalid:(d=t.toNetworkElement)==null?void 0:d.terminalId,associationtype:We[t.associationType],iscontentvisible:t.isContentVisible?1:0,percentalong:t.percentAlong,globalid:t.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(e){return{deleteFeatures:e.map(t=>({globalId:t.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(e){var s;if(((s=this.sharedNamedTraceConfigurations)==null?void 0:s.length)===0)return;const t=this.sharedNamedTraceConfigurations.map(n=>n.globalId),o=await this.queryNamedTraceConfigurations({globalIds:t},e);for(const n of this.sharedNamedTraceConfigurations){const a=o==null?void 0:o.find(l=>l.globalId===n.globalId);if(a){const l=a.write({},{origin:"service"});n.read(l,{origin:"service"})}}}async _createRulesTable(){var a;const e=this.networkSystemLayers.rulesTableUrl,t=new De({url:e});await t.load();const o=(a=this.dataElement)==null?void 0:a.domainNetworks;if(!o)return null;const s=o.flatMap(l=>[...l.edgeSources||[],...l.junctionSources||[]]),n=(await lt(t)).map(l=>this._hydrateRuleInfo(t,s,l));return new Qe({layer:t,rules:n})}_hydrateRuleInfo(e,t,o){const s=e.fieldsIndex,n=s.get("RULETYPE"),a=s.get("CREATIONDATE"),l=s.get("FROMNETWORKSOURCEID"),d=s.get("FROMASSETGROUP"),c=s.get("FROMASSETTYPE"),h=s.get("FROMTERMINALID"),w=s.get("TONETWORKSOURCEID"),g=s.get("TOASSETGROUP"),y=s.get("TOASSETTYPE"),f=s.get("TOTERMINALID"),p=s.get("VIANETWORKSOURCEID"),u=s.get("VIAASSETGROUP"),b=s.get("VIAASSETTYPE"),L=s.get("VIATERMINALID"),P=o.attributes[n.name],Q=new Date(o.attributes[a.name]),B=[{networkSourceId:o.attributes[l.name],assetGroupId:o.attributes[d.name],assetTypeId:o.attributes[c.name],terminalId:o.attributes[h.name]},{networkSourceId:o.attributes[w.name],assetGroupId:o.attributes[g.name],assetTypeId:o.attributes[y.name],terminalId:o.attributes[f.name]},{networkSourceId:o.attributes[p.name],assetGroupId:o.attributes[u.name],assetTypeId:o.attributes[b.name],terminalId:o.attributes[L.name]}];let k;(function(I){I[I.from=0]="from",I[I.to=1]="to",I[I.via=2]="via"})(k||(k={}));const T={ruleType:P,creationDate:Q};for(const I of[k.from,k.to,k.via]){if(P!==D.RTEdgeJunctionEdgeConnectivity&&I===k.via)continue;const R=B[I],O=t.find(M=>M.sourceId===R.networkSourceId),U=O==null?void 0:O.assetGroups.find(M=>M.assetGroupCode===R.assetGroupId),C=U==null?void 0:U.assetTypes.find(M=>M.assetTypeCode===R.assetTypeId),G=this._getTerminal(C,R);let S="";switch(I){case k.from:S="from";break;case k.to:S="to";break;case k.via:S="via"}T[`${S}NetworkSource`]=O,T[`${S}AssetGroup`]=U,T[`${S}AssetType`]=C,T[`${S}Terminal`]=G==null?void 0:G.toJSON()}return T}_getTerminal(e,t){var n,a;const o=e==null?void 0:e.terminalConfigurationId,s=(n=this.terminalConfigurations)==null?void 0:n.find(l=>l.id===o);return((a=s==null?void 0:s.terminals)==null?void 0:a.find(l=>l.id===t.terminalId))??null}};async function lt(e){const t=new xe({where:"1=1",outFields:["*"]});return(await Se(e,t)).features}r([i({type:[Xe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],x.prototype,"sharedNamedTraceConfigurations",void 0),r([i({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],x.prototype,"type",void 0),r([i({readOnly:!0})],x.prototype,"serviceTerritoryFeatureLayerId",null),r([i({readOnly:!0})],x.prototype,"networkSystemLayers",null),r([i({readOnly:!0})],x.prototype,"terminalConfigurations",null),r([i({readOnly:!0})],x.prototype,"domainNetworkNames",null),x=r([j("esri.networks.UtilityNetwork")],x);const dt=x,ut=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));export{dt as T,st as a,qe as b,bt as c,Xe as d,vt as e,ft as i,gt as n,oe as o,it as p,Ze as s};
